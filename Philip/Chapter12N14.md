# Chapter 12 모든 웹 개발자가 관심을가져야할 핵심 웹 지표

웹서비스의 성능을 객관적으로 평가할 수 있는 지표인 핵심 웹 지표에 대해 알아보자.

## 12.1 웹사이트와 성능

1. 방문한 목적 달성(기능)

2. 목적을 달성하는데 걸리는 시간(효율)

성능과 소비자행동의 상관관계를 살펴보자
- 1초 내로 로딩되는 사이트는 5초 내로 로딩되는 사이트보다 전자상거래 전환율(실제 구매로 이어지는 고객의 비율)이 2.5배 더 높다.
- 0~5초까지 1초 로딩이 늦어질수록 전환율은 4.42%씩 떨어진다.
- 페이지 로드시간이 0~ 2초 사이인 페이지는 가장 높은 전환율을 달성할 수 있다.
(Protent)

- 전체 웹페이지를 표시하는 데 필요한 최적의 평균 리소스 요청 수는 50회 미만이다.
- 평균적으로 웹페이지 전체를 요청하는 데 15.3초가 걸린다.
- 1~10초로 로드시간이 늘어나면 사이트를 이탈할 확률이 123% 증가한다.

그런데!

개발자 기기의 성능이 좋아서 문제를 잘 느끼지 못한다.

그 래 서 우 리 는

핵심 웹지표를 봐야한다~

## 12.2 핵심 웹 지표(Core Web Vital)
**CWV**
- LCP : Largest Contentful Paint
- FID : First Input Delay
- CLS : Cumulative Layout Shift

**LCWV(Less Core Web Vital)**
- TTFB : Time To First Byte
- FCP : First Contentful Paint

## 12.3 LCP
페이지가 처음으로 로드를 시작한 시점부터 뷰포트 내부에서 가장 큰 이미지 또는 텍스트를 렌더링하는데에 걸리는 시간

즉, 화면에서 제일 큰 요소를 렌더링하는데에 걸리는 시간

즉, 사용자 화면에 로딩이 거의 다 되면, 사용자는 불편함을 느끼지 못한다는 점

이를 달성하기 위해서 아래와 같은 사항들은 준수하는게 좋다.
- 이미지 무손실 압축
- 게으른 로딩 : 최대 콘텐츠풀 이미지는 중요하지 않은 리소스로 취급해서는 안된다.
- fade in 애니메이션의 조심사용
- 클라이언트에서 빌드하지 말 것
- 다른 출처에서 정제한 이미지를 가져오는 건 좋지 않다.

### 기준 점수
2.5초 : 양호

4초 : 개선 필요

4초 이상 : 불쌍함

## 12.4 FID
최초입력지연은 첫 상호작용으로부터 이에 대한 응답까지의 시간이다.

사용자 경험을 구글은 4개로 나누는데 RAIL이라고 한다.

R : Response : 사용자의 입력에 대한 반응 속도, 50ms 미만으로 이벤트를 처리할 것
A : Animation : 애니메이션의 각 프레임을 10ms 이하로 생성할 것
I : Idle : 유휴 시간을 극대화해 페이지가 50ms 이내에 사용자 입력에 응답하도록 할 것
L : Load : 5초 이내에 컨텐츠를 전달하고 인터렉션을 준비할 것

이러한 것을 달성하기 위해서 아래 사항을 준수하는게 좋다.
- 실행에 오래걸리는 긴 작업 분리 : 스레드를 편안하게 해준다
- 자바스크립트 코드 최소화 : 필요없는 코드 제거
- 폴리필 주의(지원하지 않는 버전의 코드에 대한 호환성)


### 기준 점수
100ms : 양호

300ms : 개선 필요

300ms 이상 : 불쌍함

## 12.5 CLS
누적 레이아웃 이동은 제일 공감가는 것으로, 첫 렌더링이 끝난 후에도 비동기 요청등을 통해 콘텐츠의 변경이 생겨 상호작용이 방해받는 것.

이걸로 점수까지내고싶진않다.

이를 위해선 아래 사항을 준수하는게 좋다.
- 삽입이 예상되는 요소를 위한 추가적인 공간 확보
- 폰트 로딩 최적화 : 폰트가 바뀌면서 영향이 발생할 수도 있다.
- 적절한 이미지 크기 설정

## 12.6 핵심은아닌애들
TTFB : 첫번째 바이트를 수신하는 데까지 걸리는 시간 : 서버사이드 렌더링에서 주요하다.

FCP(First Contentful Paint) : 뭐라도 뜨기 시작한 시간


---
# Chapter 14 웹사이트 보안을 위한 리액트와 웹페이지 보안 이슈
## 14.1 리액트에서 발생하는 크로스 사이트 스크립팅
Cross-Site Scripting, XSS란 웹 애플리케이션에서 가장 많이 보이는 취약점 중 하나로, 웹사이트 개발자가 아닌 제 3자가 웹사이트에 악성 스크립트를 삽입해 실행할 수 있는 취약점을 의미한다. 이 취약점은 일반적으로 게시판과 같이 사용자가 입력을 할 수 있고, 이 입력을 다른 사용자에게 보여줄 수 있는 경우에 발생한다.

- dangerouslySetInnerHTML
- useRef

이러한 경우 XSS 이슈를 피하기 위해 HTML을 새니타이즈 / 이스케이프 할 수 있다.

## 14.2 getServerSideProps와 서버컴포넌트를 주의하자
서버 사이드 렌더링과 서버 컴포넌트는 서버라는 개발환경을 개발자에게 쥐어주게 된다.
서버로부터 전달되어 처리되는 값은 반드시 필요한 값으로만 제한되어야 한다.

## 14.3 <a>태그 조심히 봐라
조심하라

## 14.4 HTTP 보안 헤더 설정하기
## 14.4.1 Strict-Transport-Security
모든 사이트가 HTTPS를 통해 접근해야 하며, 만약 HTTP로 접근하는 경우에 모든 시도를 HTTPS로 변경한다.

### 14.4.2 비표준 기술

### 14.4.3 X-Frame-Options
외부에서 iframe으로  자신의 페이지를 렌더링 할 수 있을지를 결정한다.

### 14.4.4 Premissions-Policy
웹사이트에서 사용할 수 있는 기능과 사용할 수 없는 기능을 명시적으로 선언하는 헤더
카메라나 GPS같이 브라우저가 제공하는 기능을 선별한다.

### 14.4.5 X-Content-Type-Options
MIME(Multipurpose Internet Mail Extension)의 약자로, Content-Type의 값으로 사용된다.

뭐다뭐다 해서 계속 나오는데, 그만 흥미를 잃고 눈앞이 깜깜해졌다.